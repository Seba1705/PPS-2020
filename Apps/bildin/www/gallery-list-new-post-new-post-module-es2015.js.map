{"version":3,"sources":["./src/app/gallery/list/new-post/new-post.page.html","./src/app/shared/pickers/image-picker/image-picker.component.html","./src/app/gallery/list/new-post/new-post.module.ts","./src/app/gallery/list/new-post/new-post.page.scss","./src/app/gallery/list/new-post/new-post.page.ts","./src/app/models/post.ts","./src/app/shared/pickers/image-picker/image-picker.component.scss","./src/app/shared/pickers/image-picker/image-picker.component.ts","./src/app/shared/shared.module.ts"],"names":[],"mappings":"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","file":"gallery-list-new-post-new-post-module-es2015.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar mode=\\\"ios\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button (click)=\\\"navCtrl.navigateForward(['/list', type])\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Nuevo post</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding>\\n  <form [formGroup]=\\\"form\\\">\\n    <ion-grid>\\n      <ion-row padding>\\n        <ion-col size-sm=\\\"8\\\" offset-sm=\\\"2\\\" style=\\\"padding-top: 20px;\\\">\\n          <app-image-picker\\n            [showPreview]=\\\"form.get('image').value\\\"\\n            (imagePick)=\\\"onImagePicked($event)\\\"\\n          ></app-image-picker>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row padding>\\n        <ion-col size=\\\"12\\\">\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\">TÃ­tulo</ion-label>\\n            <ion-input\\n              type=\\\"text\\\"\\n              autocomplete\\n              autocorrect\\n              formControlName=\\\"title\\\"\\n            ></ion-input>\\n          </ion-item>\\n        </ion-col>\\n        <ion-col size=\\\"12\\\">\\n          <ion-item>\\n            <ion-label position=\\\"floating\\\">DescripciÃ³n</ion-label>\\n            <ion-textarea\\n            rows=\\\"6\\\"\\n              autocomplete\\n              autocorrect\\n              formControlName=\\\"description\\\"\\n            ></ion-textarea>\\n          </ion-item>\\n        </ion-col>\\n      </ion-row>\\n\\n      \\n    <ion-item lines=\\\"none\\\" class=\\\"publicar\\\">\\n      <ion-button\\n        (click)=\\\"onCreatePost()\\\"\\n        [disabled]=\\\"!form.valid || !form.get('image').value\\\"\\n      >\\n      <ion-label>Publicar</ion-label>\\n        <ion-icon name=\\\"md-arrow-forward\\\" slot=\\\"end\\\"></ion-icon>\\n      </ion-button>\\n    </ion-item>\\n      \\n    </ion-grid>\\n  </form>\\n</ion-content>\\n\"","module.exports = \"<div class=\\\"picker\\\">\\n  <ion-img\\n    role=\\\"button\\\"\\n    class=\\\"image\\\"\\n    (click)=\\\"onPickImage()\\\"\\n    [src]=\\\"selectedImage\\\"\\n    *ngIf=\\\"selectedImage && showPreview\\\"\\n  ></ion-img>\\n  <ion-button mode=\\\"ios\\\" color=\\\"primary\\\" (click)=\\\"onPickImage()\\\" *ngIf=\\\"!selectedImage || !showPreview\\\">\\n    <ion-icon name=\\\"camera\\\" slot=\\\"start\\\"></ion-icon>\\n    <ion-label>Tomar foto</ion-label>\\n  </ion-button>\\n</div>\\n<input\\n  type=\\\"file\\\"\\n  accept=\\\"image/jpeg\\\"\\n  *ngIf=\\\"usePicker\\\"\\n  #filePicker\\n  (change)=\\\"onFileChosen($event)\\\"\\n/>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { NewPostPage } from './new-post.page';\nimport { SharedModule } from 'src/app/shared/shared.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NewPostPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReactiveFormsModule,\n    RouterModule.forChild(routes),\n    SharedModule\n  ],\n  declarations: [NewPostPage]\n})\nexport class NewPostPageModule {}\n","module.exports = \"ion-content {\\n  --ion-background-color: var(--ion-color-lisght);\\n  --ion-text-color: var(--ion-color-dark);\\n}\\n\\n.publicar ion-button {\\n  margin: 0 auto;\\n  font-size: 1rem;\\n  height: 2.5rem;\\n  width: 10rem;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZ2FsbGVyeS9saXN0L25ldy1wb3N0L0M6XFxVc2Vyc1xcY2FtYXJcXERvY3VtZW50c1xcUFBTXFxiaWxkaW4vc3JjXFxhcHBcXGdhbGxlcnlcXGxpc3RcXG5ldy1wb3N0XFxuZXctcG9zdC5wYWdlLnNjc3MiLCJzcmMvYXBwL2dhbGxlcnkvbGlzdC9uZXctcG9zdC9uZXctcG9zdC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0E7RUFDSSwrQ0FBQTtFQUNBLHVDQUFBO0FDQUo7O0FER0E7RUFDSSxjQUFBO0VBQ0EsZUFBQTtFQUNBLGNBQUE7RUFDQSxZQUFBO0FDQUoiLCJmaWxlIjoic3JjL2FwcC9nYWxsZXJ5L2xpc3QvbmV3LXBvc3QvbmV3LXBvc3QucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiXG5pb24tY29udGVudCB7XG4gICAgLS1pb24tYmFja2dyb3VuZC1jb2xvcjogdmFyKC0taW9uLWNvbG9yLWxpc2dodCk7IC8vdHJhbnNwYXJlbnRlXG4gICAgLS1pb24tdGV4dC1jb2xvcjogdmFyKC0taW9uLWNvbG9yLWRhcmspO1xufVxuXG4ucHVibGljYXIgaW9uLWJ1dHRvbntcbiAgICBtYXJnaW46IDAgYXV0bztcbiAgICBmb250LXNpemU6IDFyZW07XG4gICAgaGVpZ2h0OiAyLjVyZW07XG4gICAgd2lkdGg6IDEwcmVtO1xufSIsImlvbi1jb250ZW50IHtcbiAgLS1pb24tYmFja2dyb3VuZC1jb2xvcjogdmFyKC0taW9uLWNvbG9yLWxpc2dodCk7XG4gIC0taW9uLXRleHQtY29sb3I6IHZhcigtLWlvbi1jb2xvci1kYXJrKTtcbn1cblxuLnB1YmxpY2FyIGlvbi1idXR0b24ge1xuICBtYXJnaW46IDAgYXV0bztcbiAgZm9udC1zaXplOiAxcmVtO1xuICBoZWlnaHQ6IDIuNXJlbTtcbiAgd2lkdGg6IDEwcmVtO1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { DatabaseService } from 'src/app/services/database.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { LoadingController, NavController } from '@ionic/angular';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { Post } from 'src/app/models/post';\nimport { Plugins } from '@capacitor/core';\n\n\nfunction base64toBlob(base64Data, contentType) {\n  contentType = contentType || '';\n  const sliceSize = 1024;\n  const byteCharacters = window.atob(base64Data);\n  const bytesLength = byteCharacters.length;\n  const slicesCount = Math.ceil(bytesLength / sliceSize);\n  const byteArrays = new Array(slicesCount);\n\n  for (let sliceIndex = 0; sliceIndex < slicesCount; ++sliceIndex) {\n    const begin = sliceIndex * sliceSize;\n    const end = Math.min(begin + sliceSize, bytesLength);\n\n    const bytes = new Array(end - begin);\n    for (let offset = begin, i = 0; offset < end; ++i, ++offset) {\n      bytes[i] = byteCharacters[offset].charCodeAt(0);\n    }\n    byteArrays[sliceIndex] = new Uint8Array(bytes);\n  }\n  return new Blob(byteArrays, { type: contentType });\n}\n\n@Component({\n  selector: 'app-new-post',\n  templateUrl: './new-post.page.html',\n  styleUrls: ['./new-post.page.scss'],\n})\nexport class NewPostPage implements OnInit {\n  form: FormGroup;\n  type;\n\n  constructor(private database: DatabaseService,\n              private router: Router,\n              private loadingCtrl: LoadingController,\n              private route: ActivatedRoute,\n              public navCtrl: NavController) { }\n\n  ngOnInit() {\n    this.route.paramMap.subscribe(paramMap => {\n      if (!paramMap.has('type')) {\n        this.navCtrl.navigateBack('/gallery');\n        return;\n      }\n      this.type = paramMap.get('type');\n    });\n\n    this.form = new FormGroup({\n      title: new FormControl(null, {\n        updateOn: 'blur',\n        validators: [Validators.required]\n      }),\n      description: new FormControl(null, {\n        updateOn: 'blur',\n        validators: [Validators.required]\n      }),\n      \n      // description: new FormControl(null, {\n      //   updateOn: 'blur',\n      //   validators: [Validators.required, Validators.maxLength(180)]\n      // }),\n      // location: new FormControl(null, { validators: [Validators.required] }),\n      image: new FormControl(null)\n    });\n  }\n\n\n  onImagePicked(imageData: string | File) {\n    console.log('valor form' + this.form);\n    let imageFile;\n    if (typeof imageData === 'string') {\n      try {\n        imageFile = base64toBlob(\n          imageData.replace('data:image/jpeg;base64,', ''),\n          'image/jpeg'\n        );\n      } catch (error) {\n        console.log(error);\n        alert(error);\n        return;\n      }\n    } else {\n      imageFile = imageData;\n    }\n    this.form.patchValue({ image: imageFile });\n  }\n\n\n  onCreatePost() {\n    if (!this.form.valid || !this.form.get('image').value) {\n      return;\n    }\n    this.loadingCtrl\n      .create({\n        message: 'Subiendo foto...'\n      })\n      .then(loadingEl => {\n        loadingEl.present();\n        \n\n        let imagen=this.form.get('image').value;\n\n        if(!document.URL.startsWith('http')){\n        let imageName = (this.form.value.title).replace(/\\s/g, '-') + '-' + Math.floor(Math.random()*(999-100+1)+100);\n        imagen.name = imageName;\n        }\n\n        const uploadTask = this.database.uploadImage(this.form.get('image').value);\n        uploadTask.task.on('state_changed', (snapshot) => {\n          // Observe state change events such as progress, pause, and resume\n          // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n          const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n          console.log('Upload is ' + progress + '% done');\n\n        }, (error) => {\n          // Handle unsuccessful uploads\n\n        }, () => {\n          // Handle successful uploads on complete\n          // For instance, get the download URL: https://firebasestorage.googleapis.com/...\n          uploadTask.task.snapshot.ref.getDownloadURL().then((downloadURL) => {\n            console.log('File available at', downloadURL);\n\n            Plugins.Storage.get({ key: 'user-bd' }).then(\n              (userData) => {\n                this.database.AgregarUno(JSON.parse(JSON.stringify(\n                  new Post({\n                    date: new Date(),\n                    imageUrl: downloadURL,\n                    title: this.form.value.title,\n                    description: this.form.value.description,\n                    type: this.type,\n                    user: JSON.parse(userData.value),\n                    votes: []\n                  }))), 'picbild-posts').then(() => {\n                    loadingEl.dismiss();\n                    this.form.reset();\n                    this.router.navigate(['/list', this.type]);\n                  });\n              }, () => {\n                this.navCtrl.navigateBack('');\n              }\n            );\n          });\n        });\n      });\n  }\n}\n","\n// export class Post {\n//   constructor(\n//     public id: string,\n//     public imageUrl: string,\n//     public title: string,\n//     public type: string,\n//     public user: string,\n//     public votes: string[]\n//   ) {}\n// }\n\nimport { User } from './user';\n\n\n\nexport class Post {\n    public date: Date;\n    public id?: string;\n    public imageUrl?: string;\n    public title?: string;\n    public description?: string;\n    public type?: string;\n    public user?: User;\n    public votes?: string[];\n\n\n    constructor(init?: Partial<Post>) {\n        Object.assign(this, init);\n    }\n}\n","module.exports = \".picker {\\n  width: 30rem;\\n  max-width: 80%;\\n  height: 20rem;\\n  max-height: 30vh;\\n  background-color: rgba(128, 128, 128, 0.3);\\n  border-radius: 15px;\\n  margin: auto;\\n  display: -webkit-box;\\n  display: flex;\\n  -webkit-box-pack: center;\\n          justify-content: center;\\n  -webkit-box-align: center;\\n          align-items: center;\\n  overflow: hidden;\\n}\\n\\n.image {\\n  width: 100%;\\n  height: 100%;\\n  -o-object-fit: cover;\\n     object-fit: cover;\\n}\\n\\ninput[type=file] {\\n  display: none;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvc2hhcmVkL3BpY2tlcnMvaW1hZ2UtcGlja2VyL0M6XFxVc2Vyc1xcY2FtYXJcXERvY3VtZW50c1xcUFBTXFxiaWxkaW4vc3JjXFxhcHBcXHNoYXJlZFxccGlja2Vyc1xcaW1hZ2UtcGlja2VyXFxpbWFnZS1waWNrZXIuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL3NoYXJlZC9waWNrZXJzL2ltYWdlLXBpY2tlci9pbWFnZS1waWNrZXIuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUE7RUFDSSxZQUFBO0VBQ0EsY0FBQTtFQUNBLGFBQUE7RUFDQSxnQkFBQTtFQUVBLDBDQUFBO0VBQ0EsbUJBQUE7RUFDQSxZQUFBO0VBQ0Esb0JBQUE7RUFBQSxhQUFBO0VBQ0Esd0JBQUE7VUFBQSx1QkFBQTtFQUNBLHlCQUFBO1VBQUEsbUJBQUE7RUFDQSxnQkFBQTtBQ0ZKOztBRE1FO0VBQ0UsV0FBQTtFQUNBLFlBQUE7RUFDQSxvQkFBQTtLQUFBLGlCQUFBO0FDSEo7O0FETUU7RUFDRSxhQUFBO0FDSEoiLCJmaWxlIjoic3JjL2FwcC9zaGFyZWQvcGlja2Vycy9pbWFnZS1waWNrZXIvaW1hZ2UtcGlja2VyLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiXG5cbi5waWNrZXIge1xuICAgIHdpZHRoOiAzMHJlbTtcbiAgICBtYXgtd2lkdGg6IDgwJTtcbiAgICBoZWlnaHQ6IDIwcmVtO1xuICAgIG1heC1oZWlnaHQ6IDMwdmg7XG4gICAgLy8gYm9yZGVyOiAxcHggc29saWQgdmFyKC0taW9uLWNvbG9yLXByaW1hcnkpO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMTI4LCAxMjgsIDEyOCwgMC4zKTtcbiAgICBib3JkZXItcmFkaXVzOiAxNXB4O1xuICAgIG1hcmdpbjogYXV0bztcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcblxuICB9XG4gIFxuICAuaW1hZ2Uge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBvYmplY3QtZml0OiBjb3ZlcjtcbiAgfVxuICBcbiAgaW5wdXRbdHlwZT0nZmlsZSddIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICB9XG4gICIsIi5waWNrZXIge1xuICB3aWR0aDogMzByZW07XG4gIG1heC13aWR0aDogODAlO1xuICBoZWlnaHQ6IDIwcmVtO1xuICBtYXgtaGVpZ2h0OiAzMHZoO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDEyOCwgMTI4LCAxMjgsIDAuMyk7XG4gIGJvcmRlci1yYWRpdXM6IDE1cHg7XG4gIG1hcmdpbjogYXV0bztcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIG92ZXJmbG93OiBoaWRkZW47XG59XG5cbi5pbWFnZSB7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIG9iamVjdC1maXQ6IGNvdmVyO1xufVxuXG5pbnB1dFt0eXBlPWZpbGVdIHtcbiAgZGlzcGxheTogbm9uZTtcbn0iXX0= */\"","import {\n  Component,\n  OnInit,\n  Output,\n  EventEmitter,\n  ViewChild,\n  ElementRef,\n  Input\n} from '@angular/core';\nimport { Plugins, Capacitor, CameraSource, CameraResultType } from '@capacitor/core';\nimport { Platform } from '@ionic/angular';\n\n@Component({\n  selector: 'app-image-picker',\n  templateUrl: './image-picker.component.html',\n  styleUrls: ['./image-picker.component.scss'],\n})\nexport class ImagePickerComponent implements OnInit {\n  @ViewChild('filePicker', {static: false}) filePickerRef: ElementRef<HTMLInputElement>;\n  @Output() imagePick = new EventEmitter<string | File>(); // Emits the file (filepicker) or the stringbase64 (camera).\n  @Input() showPreview = false; // after imagePick is emitted the parent component sets value to this property.\n  selectedImage: string;\n  usePicker = false;\n\n  constructor(private platform: Platform) {}\n\n  ngOnInit() {\n    console.log('Mobile:', this.platform.is('mobile'));\n    console.log('Hybrid:', this.platform.is('hybrid'));\n    console.log('iOS:', this.platform.is('ios'));\n    console.log('Android:', this.platform.is('android'));\n    console.log('Desktop:', this.platform.is('desktop'));\n    if (\n      (this.platform.is('mobile') && !this.platform.is('hybrid')) ||\n      this.platform.is('desktop')\n    ) {\n      this.usePicker = true;\n    }\n  }\n\n\n  onPickImage() { // When camera is used (mobile)\n    if (!Capacitor.isPluginAvailable('Camera') || this.usePicker) {   // || this.usePicker\n      this.filePickerRef.nativeElement.click(); // I make the click in the hidden input, not the user\n      return;\n    }\n    Plugins.Camera.getPhoto({\n      quality: 75,\n      source: CameraSource.Prompt,\n      correctOrientation: true,\n      // height: 320,\n      //width: 1200,\n      resultType: CameraResultType.DataUrl\n    })\n      .then(image => {\n        this.selectedImage = image.dataUrl;\n        // alert(this.selectedImage);\n        this.imagePick.emit(image.dataUrl);\n      })\n      .catch(error => {\n        console.log(error);\n        if (this.usePicker) {\n          this.filePickerRef.nativeElement.click();\n        }\n        return false;\n      });\n  }\n\n\n  onFileChosen(event: Event) { // when file picker is used (desktop)\n    // console.log(event);\n    const pickedFile = (event.target as HTMLInputElement).files[0];\n    if (!pickedFile) {\n      return;\n    }\n    const fr = new FileReader();\n    fr.onload = () => {\n      const dataUrl = fr.result.toString();\n      this.selectedImage = dataUrl;\n      this.imagePick.emit(pickedFile);\n    };\n    fr.readAsDataURL(pickedFile);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\n\nimport { ImagePickerComponent } from './pickers/image-picker/image-picker.component';\n\n@NgModule({\n  declarations: [\n    ImagePickerComponent\n  ],\n  imports: [CommonModule, IonicModule],\n  exports: [ImagePickerComponent],\n  entryComponents: []\n})\nexport class SharedModule {}\n"],"sourceRoot":""}