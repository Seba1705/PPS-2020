{"version":3,"sources":["./src/app/gallery/list/details/details.page.html","./src/app/gallery/list/details/details.module.ts","./src/app/gallery/list/details/details.page.scss","./src/app/gallery/list/details/details.page.ts"],"names":[],"mappings":"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","file":"gallery-list-details-details-module-es5.js","sourcesContent":["module.exports = \"<ion-header no-border no-shadow>\\n  <ion-toolbar translucent mode=\\\"ios\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button (click)=\\\"navCtrl.navigateForward(['/list', post.type])\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title><ion-icon slot=\\\"start\\\" src=\\\"assets/img/bildin-text.svg\\\"></ion-icon></ion-title>    \\n      <div class=\\\"avatar\\\" slot=\\\"end\\\">\\n        <img [src]=\\\"user ? user.imageUrl : 'Cargando...'\\\" (click)=\\\"presentAlertLogout()\\\"> \\n      </div> \\n  </ion-toolbar>\\n</ion-header>\\n\\n\\n<div class=\\\"blank\\\" *ngIf=\\\"spinner\\\">\\n  <ion-spinner color=\\\"primary\\\"></ion-spinner>\\n</div>\\n\\n\\n<ion-content>\\n  <div text-center *ngIf=\\\"isLoading\\\">\\n    <ion-spinner color=\\\"primary\\\"></ion-spinner>\\n  </div>\\n  <ion-grid no-padding *ngIf=\\\"!isLoading\\\">\\n    <ion-row>\\n      <ion-col size-sm=\\\"6\\\" offset-sm=\\\"3\\\" no-padding>\\n        <ion-img class=\\\"foto\\\" [src]=\\\"post.imageUrl\\\"></ion-img>\\n      </ion-col>\\n    </ion-row>\\n\\n    <ion-list padding class=\\\"informacion\\\">\\n      <ion-item lines=\\\"none\\\">\\n        <ion-avatar slot=\\\"start\\\">\\n          <img [src]=\\\"post.user.imageUrl\\\">\\n        </ion-avatar>\\n        <ion-label>\\n          <h2>{{post.user.name ? post.user.name : 'sin usuario'}}</h2>\\n        </ion-label>\\n        <ion-icon class=\\\"corazon\\\" *ngIf=\\\"!voted\\\" (click)=\\\"onVote()\\\" slot=\\\"end\\\" src=\\\"assets/img/heart.svg\\\"></ion-icon>\\n        <ion-icon class=\\\"corazon\\\" *ngIf=\\\"voted\\\" (click)=\\\"onCancelVote()\\\" slot=\\\"end\\\" src=\\\"assets/img/heart-full.svg\\\"></ion-icon>\\n      </ion-item>\\n\\n      <ion-item class=\\\"titulo\\\" lines=\\\"none\\\">\\n        <ion-label>\\n          <h1>{{post.title}}</h1>\\n        </ion-label>\\n      </ion-item>\\n\\n      <ion-item lines=\\\"none\\\">\\n          <p>{{post.description}}</p>\\n      </ion-item>\\n\\n      <ion-item >\\n        <ion-label>\\n          <h2>Fecha de carga:</h2>\\n          <p style=\\\"font-weight: 800\\\">{{post.date | date: 'medium'}}</p>\\n        </ion-label>\\n      </ion-item>\\n    </ion-list>\\n\\n  </ion-grid>\\n</ion-content>\\n\\n\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DetailsPage } from './details.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DetailsPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [DetailsPage]\n})\nexport class DetailsPageModule {}\n","module.exports = \"ion-back-button {\\n  background: white;\\n  border-radius: 10px;\\n  margin-left: 5px;\\n}\\n\\nion-toolbar {\\n  --background: transparent;\\n  margin-bottom: -5rem;\\n}\\n\\n.scroll-content {\\n  padding-top: 0px !important;\\n}\\n\\n.avatar img {\\n  border-radius: 10px;\\n  height: 47px;\\n  width: 47px;\\n  margin-right: 5px;\\n  margin-top: 4px;\\n  -o-object-fit: cover;\\n     object-fit: cover;\\n}\\n\\n.informacion {\\n  border-radius: 25px 25px 0 0;\\n  margin-top: -30px;\\n}\\n\\n.titulo h1 {\\n  font-weight: 600;\\n}\\n\\n.corazon {\\n  color: #ff4040;\\n}\\n\\n.blank {\\n  width: 100%;\\n  height: 100%;\\n  background-color: #ffffff;\\n  -webkit-box-align: center;\\n          align-items: center;\\n  display: -webkit-box;\\n  display: flex;\\n  -webkit-box-pack: center;\\n          justify-content: center;\\n  z-index: 9;\\n  position: absolute;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZ2FsbGVyeS9saXN0L2RldGFpbHMvQzpcXFVzZXJzXFxjYW1hclxcRG9jdW1lbnRzXFxQUFNcXGJpbGRpbi9zcmNcXGFwcFxcZ2FsbGVyeVxcbGlzdFxcZGV0YWlsc1xcZGV0YWlscy5wYWdlLnNjc3MiLCJzcmMvYXBwL2dhbGxlcnkvbGlzdC9kZXRhaWxzL2RldGFpbHMucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksaUJBQUE7RUFDQSxtQkFBQTtFQUNBLGdCQUFBO0FDQ0o7O0FEQ0E7RUFDSSx5QkFBQTtFQUNBLG9CQUFBO0FDRUo7O0FEQUE7RUFDSSwyQkFBQTtBQ0dKOztBREFFO0VBQ0UsbUJBQUE7RUFDQSxZQUFBO0VBQ0EsV0FBQTtFQUNBLGlCQUFBO0VBQ0EsZUFBQTtFQUNBLG9CQUFBO0tBQUEsaUJBQUE7QUNHSjs7QUREQTtFQUNJLDRCQUFBO0VBQ0EsaUJBQUE7QUNJSjs7QUREQTtFQUNJLGdCQUFBO0FDSUo7O0FEREE7RUFDSSxjQUFBO0FDSUo7O0FEREE7RUFDSSxXQUFBO0VBQ0EsWUFBQTtFQUNBLHlCQUFBO0VBQ0EseUJBQUE7VUFBQSxtQkFBQTtFQUNBLG9CQUFBO0VBQUEsYUFBQTtFQUNBLHdCQUFBO1VBQUEsdUJBQUE7RUFDQSxVQUFBO0VBQ0Esa0JBQUE7QUNJSiIsImZpbGUiOiJzcmMvYXBwL2dhbGxlcnkvbGlzdC9kZXRhaWxzL2RldGFpbHMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWJhY2stYnV0dG9ue1xuICAgIGJhY2tncm91bmQ6IHdoaXRlO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgbWFyZ2luLWxlZnQ6IDVweDtcbn1cbmlvbi10b29sYmFye1xuICAgIC0tYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgbWFyZ2luLWJvdHRvbTogLTVyZW07XG59XG4uc2Nyb2xsLWNvbnRlbnQge1xuICAgIHBhZGRpbmctdG9wOiAwcHggIWltcG9ydGFudDtcbiAgfVxuXG4gIC5hdmF0YXIgaW1ne1xuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgaGVpZ2h0OiA0N3B4O1xuICAgIHdpZHRoOiA0N3B4O1xuICAgIG1hcmdpbi1yaWdodDogNXB4O1xuICAgIG1hcmdpbi10b3A6IDRweDtcbiAgICBvYmplY3QtZml0OiBjb3Zlcjtcbn1cbi5pbmZvcm1hY2lvbntcbiAgICBib3JkZXItcmFkaXVzOiAyNXB4IDI1cHggMCAwO1xuICAgIG1hcmdpbi10b3A6IC0zMHB4O1xufVxuXG4udGl0dWxvIGgxe1xuICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG59XG5cbi5jb3Jhem9ue1xuICAgIGNvbG9yOiAjZmY0MDQwO1xufVxuXG4uYmxhbmt7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIHotaW5kZXg6IDk7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xufVxuIiwiaW9uLWJhY2stYnV0dG9uIHtcbiAgYmFja2dyb3VuZDogd2hpdGU7XG4gIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gIG1hcmdpbi1sZWZ0OiA1cHg7XG59XG5cbmlvbi10b29sYmFyIHtcbiAgLS1iYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgbWFyZ2luLWJvdHRvbTogLTVyZW07XG59XG5cbi5zY3JvbGwtY29udGVudCB7XG4gIHBhZGRpbmctdG9wOiAwcHggIWltcG9ydGFudDtcbn1cblxuLmF2YXRhciBpbWcge1xuICBib3JkZXItcmFkaXVzOiAxMHB4O1xuICBoZWlnaHQ6IDQ3cHg7XG4gIHdpZHRoOiA0N3B4O1xuICBtYXJnaW4tcmlnaHQ6IDVweDtcbiAgbWFyZ2luLXRvcDogNHB4O1xuICBvYmplY3QtZml0OiBjb3Zlcjtcbn1cblxuLmluZm9ybWFjaW9uIHtcbiAgYm9yZGVyLXJhZGl1czogMjVweCAyNXB4IDAgMDtcbiAgbWFyZ2luLXRvcDogLTMwcHg7XG59XG5cbi50aXR1bG8gaDEge1xuICBmb250LXdlaWdodDogNjAwO1xufVxuXG4uY29yYXpvbiB7XG4gIGNvbG9yOiAjZmY0MDQwO1xufVxuXG4uYmxhbmsge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgei1pbmRleDogOTtcbiAgcG9zaXRpb246IGFic29sdXRlO1xufSJdfQ== */\"","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { NavController, ToastController } from '@ionic/angular';\nimport { Subscription } from 'rxjs';\nimport { DatabaseService } from 'src/app/services/database.service';\nimport { Post } from 'src/app/models/post';\nimport { User } from 'src/app/models/user';\nimport { Plugins } from '@capacitor/core';\n\n\n@Component({\n  selector: 'app-details',\n  templateUrl: './details.page.html',\n  styleUrls: ['./details.page.scss'],\n})\nexport class DetailsPage implements OnInit, OnDestroy {\n\n  private postSub: Subscription;\n  isLoading = false;\n  postId = '';\n  post: Post;\n  user: User;\n  voted = false;  \n  spinner = true;\n\n  constructor(  private route: ActivatedRoute,\n                public navCtrl: NavController,\n                private database: DatabaseService,\n                public toastController: ToastController ) { }\n\n  ngOnInit() {\n    // this.user = JSON.parse(localStorage.getItem('user-bd'));\n    Plugins.Storage.get({ key: 'user-bd' }).then(\n      (userData) => {\n        this.user = JSON.parse(userData.value);\n      }, () => {\n        this.navCtrl.navigateBack('login');\n      }\n    );\n\n\n    this.route.paramMap.subscribe(paramMap => {\n      if (!paramMap.has('postId')) {\n        this.navCtrl.navigateBack('/gallery');\n        return;\n      }\n      this.isLoading = true;\n      this.postId = paramMap.get('postId');\n      this.database.TraerUno('picbild-posts', this.postId).then(post => {\n        // console.log('este es el post ' + JSON.stringify(post));\n        this.post = post;\n        this.voted = (this.post.votes || this.post.votes.length < 1) ? this.post.votes.includes(this.user.id) : false;\n        this.isLoading = false;\n        setTimeout(() => this.spinner = false, 1000);\n      });\n    });\n  }\n\n\n\n  onVote() {\n    if (!this.post.votes) { this.post.votes = []; }\n    this.post.votes.push(this.user.id);\n    console.log(this.post);\n    this.database.ModificarUno(JSON.parse(JSON.stringify(this.post)), 'picbild-posts')\n    .then( () => {\n      this.voted = true;\n      this.presentToast();\n    });\n  }\n\n  onCancelVote() {\n    const index = this.post.votes.indexOf(this.user.id);\n    if (index > -1) {\n      this.post.votes.splice(index);\n      this.database.ModificarUno(JSON.parse(JSON.stringify(this.post)), 'picbild-posts')\n      .then( () => {\n        this.voted = false;\n      });\n    }\n  }\n\n\n  ngOnDestroy() {\n    if (this.postSub) {\n      this.postSub.unsubscribe();\n    }\n  }\n\n  async presentToast() {\n    const toast = await this.toastController.create({\n      header: '¡Muchas gracias por tu voto!',\n      duration: 2000\n    });\n    toast.present();\n  }\n\n}\n"],"sourceRoot":""}